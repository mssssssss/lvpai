<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css'>
    <!-- <link rel="stylesheet" type="text/css" href="css/normalize.css" /> -->
    <!-- <link rel="stylesheet" type="text/css" href="css/htmleaf-demo.css"> -->
    <link rel="stylesheet" href="css/style.css">

</head>

<body>
    <div class="wrapper">
        <!-- 竖直排列 导航点 -->
        <div class="nav-dots">
            
            <div data-slide="1" class="nav-dot">
            </div>
            <div data-slide="2" class="nav-dot">
            </div>
            <div data-slide="3" class="nav-dot">
            </div>
            <div data-slide="4" class="nav-dot">
            </div>
            <div data-slide="5" class="nav-dot">
            </div>
        </div>
        <!-- 切换的内容 -->
        <div data-slide="1" class="panel">
            <div id="layer-1" class="trans-layer"></div>
            <section id="section-1" class="section">
                <div class="section-content">
                    <h1>Section 1</h1>
                </div>
            </section>
        </div>
        <div data-slide="2" class="panel">
            <div id="layer-2" class="trans-layer"></div>
            <section id="section-2" class="section">
                <div class="section-content">
                    <h1>Section 2</h1>
                </div>
            </section>
        </div>
        <div data-slide="3" class="panel">
            <div id="layer-3" class="trans-layer"></div>
            <section id="section-3" class="section">
                <div class="section-content">
                    <h1>Section 3</h1>
                </div>
            </section>
        </div>
        <div data-slide="4" class="panel">
            <div id="layer-4" class="trans-layer"></div>
            <section id="section-4" class="section">
                <div class="section-content">
                    <h1>Section 4</h1>
                </div>
            </section>
        </div>
        <div data-slide="5" class="panel">
            <div id="layer-5" class="trans-layer"></div>
            <section id="section-5" class="section">
                <div class="section-content">
                    <h1>Section 5</h1>
                </div>
            </section>
        </div>
    </div>
    <script src="js/jquery-3.4.1.js"></script>
    <script>
        $('.wrapper').each(function () {
            var $slider = $(this);
            var numberOfSlides = $slider.find('.panel').length;

            $slider.find('.panel:eq(0)').addClass('_active');
            $slider.find('.nav-dot:eq(0)').addClass('active');

            var $activeSlide = $slider.find('.panel._active');

            // 当鼠标移到相应的点上去时，跳至相应的界面
            $('.nav-dot').on('mouseover', function () {
                var slideToGo = $(this).data('slide');
                goToSlide(slideToGo);
            });


            $slider.on('slide.changed', function () {
                console.log('slide changed !');
                $('.nav-dot').removeClass('active');
                var $activeDot = $('.nav-dot[data-slide="' + $('.panel._active').data('slide') + '"]');
                $activeDot.addClass('active');
            });

            // function nextSlide() {
            //     $activeSlide = $slider.find('.panel._active');
            //     var $nextSlide = $activeSlide.next('.panel');
            //     $activeSlide.removeClass('_active');
            //     $nextSlide.addClass('_active');
            //     var slideIndex = $slider.find('.panel._active').index('.panel');
            //     console.log(slideIndex);
            //     if (slideIndex >= numberOfSlides || slideIndex <= -1) {
            //         firstSlide();
            //         $slider.trigger('slide.changed');

            //     } else {
            //         $slider.trigger('slide.changed');
            //     }

            // }

            // function prevSlide() {
            //     $activeSlide = $slider.find('.panel._active');
            //     var $prevSlide = $activeSlide.prev('.panel');

            //     $activeSlide.removeClass('_active');
            //     $prevSlide.addClass('_active');


            //     var slideIndex = $slider.find('.panel._active').index();
            //     console.log(slideIndex);


            //     if (typeof $prevSlide === 'undefined' || $prevSlide === null || $prevSlide.length == -1 ||
            //         slideIndex <= -1) {
            //         lastSlide();
            //         $slider.trigger('slide.changed');
            //     } else {
            //         $slider.trigger('slide.changed');
            //     }

            // }

            // function firstSlide() {
            //     $('.panel._active').removeClass('_active');
            //     $slider.find('.panel:eq(0)').addClass('_active');
            //     $activeSlide = $slider.find('.panel:eq(0)');

            // }

            // function lastSlide() {
            //     $('.panel._active').removeClass('_active');
            //     $slider.find('.panel').eq(numberOfSlides - 1).addClass('_active');
            // }

            // 跳到指定页面的函数
            function goToSlide(slideToGo) {
                $('.panel._active').removeClass('_active');
                $slider.find('.panel').eq(slideToGo - 1).addClass('_active');
                $activeSlide = $slider.find('.panel').eq(slideToGo - 1).addClass('_active');
                $slider.trigger('slide.changed');
            }
        });
    </script>
</body>

</html>